# QMT MCP Server

## 项目简介

- 基于 QMT 平台股票行情的 MCP 服务器，用于提供股票市场数据下载和查询的功能。

## 功能特性

- 获取股票详细信息
- 下载股票历史数据
- 查询股票市场数据

## 工具函数

- `get_current_time_tool`: 获取当前时间
- `get_instrument_detail_tool`: 获取股票的详细信息
- `download_history_data_tool`: 下载特定股票的历史市场数据
- `download_history_data2_tool`: 下载多只股票的历史市场数据
- `get_market_data_ex_tool`: 获取多只股票的市场数据

## 样例展示

- 问：中国移动A股近三个月表现如何，结合数据多角度全面的分析一下。

        为了详细分析中国移动A股近三个月的表现，我需要先获取相关数据。中国移动A股的股票代码是600941.SH，我将获取这只股票的详细信息和历史行情数据。

        View result from get_instrument_detail_tool

        现在我将下载中国移动A股近三个月的历史数据，考虑到今天是2025年4月16日，我将获取2025年1月16日至今的每日数据：

        View result from download_history_data_tool

        现在我将获取中国移动A股的详细市场数据：

        View result from get_market_data_ex_tool

        让我们获取当前时间，以确定最新的交易日：
        View result from get_current_time_tool

        现在我已经获取了中国移动A股（600941.SH）近三个月的详细数据，让我对其表现进行全面分析。
        中国移动A股近三个月表现分析
        1. 股价走势分析
        整体走势：

        起始价格（2025年1月16日）：开盘价108.40元，收盘价109.29元
        最新价格（2025年4月15日）：开盘价110.43元，收盘价111.75元
        三个月累计涨幅：2.25%（从109.29元涨至111.75元）

        阶段性表现：

        1月份：股价波动较小，维持在107-111元区间
        2月份：出现明显上涨，2月21日达到阶段性高点114.50元
        2月末至3月：经历一波下跌，3月12日跌至105.66元的阶段性低点
        3月下旬至4月：企稳回升，4月9日达到112.60元，随后小幅回调

        2. 交易量分析
        交易量变化：

        日均成交量：约16.2万手
        高交易量日期：

        2月10日：34.5万手（股价从108.14元上涨至110.00元）
        2月21日：35.2万手（股价从110.37元上涨至114.50元）
        3月21日：35.5万手（股价从105.00元上涨至106.65元）
        4月7日：36.8万手（股价从108.99元下跌后回升至108.45元）
        4月8日：32.3万手（股价大幅上涨至111.60元）



        交易量与价格关系：

        显著上涨时成交量放大：如2月10日、2月21日、4月8日等
        价格调整时成交量相对较小：如3月中旬至3月下旬

        3. 价格波动性分析
        波动幅度：

        最高价：114.50元（2025年2月21日）
        最低价：105.00元（2025年3月20日）
        最大振幅：9.05%（最高点与最低点的差距）
        日内平均波动幅度：1.58%

        波动率：

        近三个月日均波动率：0.77%
        2月份波动率高于1月份和3月份，反映市场情绪较为活跃

        4. 技术指标分析
        趋势线：

        短期趋势：4月以来呈现上升趋势
        中期趋势：形成了一个"V"形反转形态，3月中旬见底后开始回升

        支撑位与阻力位：

        主要支撑位：105元附近（多次测试未有效跌破）
        主要阻力位：112-115元区间（2月高点区域）

        成交量指标：

        价格上涨时成交量放大，表明多头力量较强
        近期成交量维持在较高水平，显示市场对该股关注度上升

        5. 与市场对比分析
        虽然无法直接获取同期上证指数数据，但根据价格走势特征，可以推断：

        1-2月中国移动表现强于大盘（2月市场整体表现较好）
        3月初至中旬与市场同步调整
        4月初以来跟随市场整体反弹，表现相对积极

        6. 重要时间节点分析
        关键日期及表现：

        2月21日：单日大涨3.74%，成交量明显放大
        2月22-26日：连续3个交易日下跌，累计跌幅约6%
        3月20-21日：触及阶段性低点后强劲反弹，单日涨幅1.57%
        4月8-9日：连续两个交易日上涨，累计涨幅3.83%

        7. 投资价值评估
        基于数据的观察：

        价格震荡上行，整体呈现稳健上升态势
        交易活跃度适中，无明显异常波动
        近期成交量增加伴随价格上涨，显示市场信心增强

        潜在因素：

        作为通信行业龙头，中国移动具有较强的市场地位
        5G业务发展及潜在的新兴技术应用可能是近期股价上涨的驱动因素
        相对稳健的价格波动反映出投资者对该股的长期看好

        8. 综合结论
        中国移动A股在近三个月表现总体呈现先抑后扬的走势：1月相对平稳，2月出现明显上涨后回调，3月经历一波调整，4月以来再次企稳回升。整体累计涨幅为2.25%，波动性适中，交易活跃度较高。从技术面来看，该股已经走出了一个完整的调整-反弹周期，目前处于上升通道中，短期内有望继续向上突破前期高点。随着近期成交量的增加，市场对该股的兴趣正在增强，后市表现值得关注。

- 问：中石油、中石化、中海油最近三个月A股表现如何

        让我为您查询中石油、中石化和中海油在A股市场最近三个月的表现数据。首先，我需要获取这些公司的股票代码，然后下载相关的历史数据。
        中石油在A股市场的股票代码是601857.SH；中石化的股票代码是600028.SH；中海油在A股的股票代码是600938.SH。
        让我先确认这些代码并获取股票信息：

        View result from get_instrument_detail_tool 

        View result from get_instrument_detail_tool 

        View result from get_instrument_detail_tool

        现在让我获取当前时间，以便确定最近三个月的时间范围：

        View result from get_current_time_tool

        根据当前时间是2025年4月21日，我将获取从2025年1月21日至今（约3个月）的股票数据：

        View result from download_history_data2_tool 

        现在我将获取这些股票的市场数据：

        View result from get_market_data_ex_tool 

        基于获取的数据，我现在可以分析中石油、中石化和中海油在A股市场最近三个月的表现情况。
        中石油（601857.SH）最近三个月表现分析

        起始价格（2025年1月21日）：开盘价为8.53元
        结束价格（2025年4月21日）：收盘价为7.94元
        三个月涨跌幅：(7.94 - 8.53) / 8.53 ≈ -6.92%
        期间最高价：8.56元（1月21日）
        期间最低价：7.33元（4月7日）
        趋势分析：整体呈现先稳定后下跌的走势，4月初出现较大幅度下跌，随后有小幅反弹

        中石化（600028.SH）最近三个月表现分析

        起始价格（2025年1月21日）：开盘价为6.18元
        结束价格（2025年4月21日）：收盘价为5.66元
        三个月涨跌幅：(5.66 - 6.18) / 6.18 ≈ -8.41%
        期间最高价：6.19元（1月21日）
        期间最低价：5.25元（4月7日）
        趋势分析：整体呈下行趋势，4月初同样出现明显跌幅，随后有所回升

        中海油（600938.SH）最近三个月表现分析

        起始价格（2025年1月21日）：开盘价为28.23元
        结束价格（2025年4月21日）：收盘价为24.92元
        三个月涨跌幅：(24.92 - 28.23) / 28.23 ≈ -11.73%
        期间最高价：28.28元（1月21日）
        期间最低价：23.11元（4月7日）
        趋势分析：整体下跌幅度最大，尤其在4月初出现了急剧下跌，随后有小幅回升

        三家公司对比分析

        跌幅对比：中海油表现最差，三个月累计跌幅约11.73%；中石化次之，跌幅约8.41%；中石油表现相对较好，跌幅约6.92%
        波动性：中海油波动性最大，股价从28元区间下降至24元区间；中石油和中石化波动相对较小
        关键时点：三家公司在4月7日前后均出现较大跌幅，可能与同一市场因素或行业因素有关
        反弹表现：三家公司在4月中旬都有一定程度的反弹，但未能恢复到3月底的水平

        总结
        最近三个月，三家石油公司在A股市场均呈现下跌趋势，其中中海油跌幅最大，中石油表现相对较好。三家公司在4月初均出现明显下跌，随后有小幅反弹，表明石油行业整体可能受到了某些不利因素的影响。这三家公司的股价走势相似，显示出较强的行业关联性。


## 快速开始

1. 安装 QMT-MCP-Server

    ```bash
    $ pip install git+https://github.com/jm12138/qmt-mcp-server
    ```

2. 启动 QMT 或 MiniQMT 客户端


3. 启动 MCP 服务器

    1. stdio 模式

        ```bash
        $ qmt_mcp_server_stdio
        ```

    2. sse 模式

        ```bash
        $ qmt_mcp_server_sse --host 0.0.0.0 --port 8000
        ```

4. 客户端配置

    1. Claude Desktop

        ```json
        {
            "mcpServers": {
                "qmt-mcp-server": {
                    "command": "qmt_mcp_server_stdio"
                }
            }
        }
        ```

    2. VS Code

        ```json
        {
            "servers": {
                "qmt-mcp-server": {
                    "command": "qmt_mcp_server_stdio"
                }
            }
        }
        ```

        ```json
        {
            "servers": {
                "qmt-mcp-server": {
                    "type": "sse",
                    "url": "http://0.0.0.0:8000/sse",
                }
            }
        }
        ```